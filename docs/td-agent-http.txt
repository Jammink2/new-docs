# Storing Logs via HTTP protocol

You might want to store your logs from many places, using HTTP protocol.

## Configuration

Please add the following lines to your */etc/td-agent/td-agent.conf* file.

    :::term
    # HTTP input
    <source>
      type http
      port 8888
    </source>
    
    # Treasure Data output
    <match td.*.*>
      type tdlog
      apikey ...
      auto_create_table
      buffer_type file
      buffer_path /var/log/td-agent/buffer/td
    </match>

## Uploading Data via HTTP

You can add logs via HTTP by sending JSON data. Please use the POST method and specify the database and table name by URL.

    :::term
    $ curl -X POST -d 'json={"action":"login","user":2}' \
      http://localhost:8888/td.testdb.www_access

td-agent continuously uploads logs every minute. Sending a SIGUSR1 signal will flush the buffer; upload will start immediately.

    :::term
    $ kill -USR1 `cat /var/run/td-agent/td-agent.pid`

To confirm that your data has been uploaded successfully, issue the *td tables* command as shown below.

    :::term
    $ td tables
    +------------+------------+------+-----------+
    | Database   | Table      | Type | Count     |
    +------------+------------+------+-----------+
    | testdb     | www_access | log  | 1         |
    +------------+------------+------+-----------+

If you have any trouble, please look at /var/log/td-agent.log for further investigation.
